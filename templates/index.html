<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINE çœŸæ©Ÿæ¨¡æ“¬ç”¢ç”Ÿå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body { font-family: 'Noto+Sans+TC', sans-serif; background: #f0f2f5; }
        
        /* æ¨¡æ“¬æ‰‹æ©Ÿå¤–æ¡† */
        .phone-frame {
            width: 375px;
            height: 812px; /* iPhone X æ¯”ä¾‹ */
            background: #7494c0;
            border: 12px solid #1a1a1a;
            border-radius: 50px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* é ‚éƒ¨ç€æµ·/ç‹€æ…‹åˆ— */
        .status-bar {
            height: 44px;
            padding: 0 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
        }

        .chat-container { flex: 1; overflow-y: auto; padding: 15px; }
        .chat-container::-webkit-scrollbar { display: none; }

        .bubble-me { background: #8ceb7d; border-radius: 15px 2px 15px 15px; position: relative; }
        .bubble-other { background: white; border-radius: 2px 15px 15px 15px; position: relative; }

        /* åº•éƒ¨æ‰‹å‹¢æ¢ */
        .home-indicator {
            width: 134px;
            height: 5px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 100px;
            margin: 8px auto;
        }
    </style>
</head>
<body class="flex flex-col md:flex-row justify-center items-center min-h-screen gap-10 p-5">

    <div class="w-full max-w-sm bg-white p-6 rounded-2xl shadow-xl">
        <h2 class="text-xl font-bold mb-4 border-b pb-2">å°è©±æ§åˆ¶å°</h2>
        <div class="space-y-4">
            <div>
                <label class="text-xs font-bold text-gray-500 uppercase">å°è±¡å§“å</label>
                <input type="text" id="nameIn" value="å°æ˜" class="w-full border rounded-lg p-2 outline-none focus:ring-2 focus:ring-green-400">
            </div>
            <div class="flex bg-gray-100 p-1 rounded-lg">
                <button onclick="setSender('other')" id="btnO" class="flex-1 py-1 rounded-md text-sm font-bold bg-white shadow">å°æ–¹</button>
                <button onclick="setSender('me')" id="btnM" class="flex-1 py-1 rounded-md text-sm font-bold text-gray-500">æˆ‘</button>
            </div>
            <textarea id="msgIn" placeholder="è«‹è¼¸å…¥å°è©±..." class="w-full border rounded-lg p-2 h-24 resize-none outline-none focus:ring-2 focus:ring-green-400"></textarea>
            <button onclick="send()" class="w-full bg-green-500 text-white py-3 rounded-xl font-bold hover:bg-green-600 transition-all">é€å‡ºè¨Šæ¯</button>
            <button onclick="save()" class="w-full bg-gray-800 text-white py-3 rounded-xl font-bold hover:bg-black transition-all">ä¸‹è¼‰æ¨¡æ“¬æˆªåœ–</button>
        </div>
    </div>

    <div id="phone-capture">
        <div class="phone-frame">
            <div class="status-bar">
                <span>09:41</span>
                <div class="flex gap-1 items-center">
                    <div class="w-4 h-4 bg-white/20 rounded-full"></div>
                    <div class="w-5 h-2.5 border border-white/50 rounded-sm"></div>
                </div>
            </div>

            <div class="px-4 py-2 flex items-center justify-between text-white border-b border-white/10">
                <div class="flex items-center gap-3">
                    <span class="text-xl">â†</span>
                    <span class="font-bold text-lg" id="nameOut">å°æ˜</span>
                </div>
                <div class="flex gap-4 opacity-80">
                    <span>ğŸ”</span><span>ğŸ“</span><span>â‰¡</span>
                </div>
            </div>

            <div id="chatBox" class="chat-container space-y-4">
                <div class="text-center my-2">
                    <span class="bg-black/10 text-white text-[10px] px-3 py-1 rounded-full">2026å¹´1æœˆ12æ—¥ (ä¸€)</span>
                </div>
            </div>

            <div class="bg-white px-3 pt-2 pb-1">
                <div class="flex items-center gap-2 mb-2">
                    <span class="text-gray-400 text-2xl">+</span>
                    <div class="flex-1 bg-gray-100 rounded-full px-4 py-2 text-gray-400 text-sm">è¼¸å…¥è¨Šæ¯</div>
                    <span class="text-green-500 text-2xl">â¤</span>
                </div>
                <div class="home-indicator"></div>
            </div>
        </div>
    </div>

    <script>
        let sender = 'other';
        const nameIn = document.getElementById('nameIn');
        const nameOut = document.getElementById('nameOut');
        const msgIn = document.getElementById('msgIn');
        const chatBox = document.getElementById('chatBox');

        nameIn.oninput = () => nameOut.innerText = nameIn.value;

        function setSender(s) {
            sender = s;
            document.getElementById('btnO').className = s === 'other' ? 'flex-1 py-1 rounded-md text-sm font-bold bg-white shadow' : 'flex-1 py-1 rounded-md text-sm font-bold text-gray-500';
            document.getElementById('btnM').className = s === 'me' ? 'flex-1 py-1 rounded-md text-sm font-bold bg-green-500 text-white shadow' : 'flex-1 py-1 rounded-md text-sm font-bold text-gray-500';
        }

        function send() {
            const val = msgIn.value.trim();
            if(!val) return;
            const now = new Date();
            const timeStr = `${now.getHours()}:${now.getMinutes().toString().padStart(2,'0')}`;
            
            const div = document.createElement('div');
            div.className = `flex ${sender==='me'?'justify-end':'justify-start'} items-end gap-1`;
            
            if(sender === 'me') {
                div.innerHTML = `
                    <div class="text-[9px] text-white opacity-70 text-right leading-tight">å·²è®€<br>${timeStr}</div>
                    <div class="bubble-me px-3 py-2 text-sm max-w-[220px] shadow-sm">${val}</div>
                `;
            } else {
                div.innerHTML = `
                    <div class="w-9 h-9 bg-gray-200 rounded-2xl flex-shrink-0 border border-white/20"></div>
                    <div class="flex flex-col">
                        <span class="text-[10px] text-white/80 ml-1 mb-1">${nameIn.value}</span>
                        <div class="flex items-end gap-1">
                            <div class="bubble-other px-3 py-2 text-sm max-w-[220px] shadow-sm">${val}</div>
                            <div class="text-[9px] text-white opacity-70 leading-tight">${timeStr}</div>
                        </div>
                    </div>
                `;
            }
            chatBox.appendChild(div);
            msgIn.value = '';
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function save() {
            html2canvas(document.querySelector("#phone-capture"), {
                backgroundColor: null,
                scale: 2,
                borderRadius: 50
            }).then(canvas => {
                const a = document.createElement('a');
                a.href = canvas.toDataURL();
                a.download = `LINE_CHAT_${nameIn.value}.png`;
                a.click();
            });
        }
    </script>
</body>
</html>